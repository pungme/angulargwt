<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Angulargwt by h0ru5</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Angulargwt</h1>
        <p class="header">Angular integration for GWT</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/h0ru5/angulargwt/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/h0ru5/angulargwt/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/h0ru5/angulargwt">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/h0ru5">h0ru5</a></p>


      </header>
      <section>
        <h1>
<a name="angulargwt" class="anchor" href="#angulargwt"><span class="octicon octicon-link"></span></a>AngularGWT</h1>

<p>Write AngularJS Controllers, Filters, Directives in GWT</p>

<h2>
<a name="what-is-it" class="anchor" href="#what-is-it"><span class="octicon octicon-link"></span></a>What? (is it)</h2>

<p>This is a library that enables Authors to write components or complete apps for <a href="http://angularjs.org/" title="AngularJS">AngularJS</a> in Java. This is mostly done using compiler castings for <a href="http://www.gwtproject.org/" title="GWT">Google Web Toolkit</a> to "compile" Java Code into Javascript.</p>

<h2>
<a name="why-gwt-to-write-angular-modules" class="anchor" href="#why-gwt-to-write-angular-modules"><span class="octicon octicon-link"></span></a>Why? (GWT to write Angular modules)</h2>

<p>AngularJS provides a MVVM framework for web apps, offering modularisation, IOC and allows to create reusable components while still allowing to create apps quickly. As every contemporary web app, AngularJS is built on Javascript.</p>

<p>GWT offers a way to write, test and distibute code in Java and compile it to Javascript. This library offers the possiblity to use GWT to create modules and apps for AngularJS using GWT.</p>

<p>Javascript is a very flexible and widespread language, however for mature languages like Java, a richer set of tooling regarding development, testing, versioning and distribution support is availiable. Also a large base of developers and libraries are availiable that can be migrated more easily.</p>

<h2>
<a name="how-to-use" class="anchor" href="#how-to-use"><span class="octicon octicon-link"></span></a>How? (to use)</h2>

<p>Best way to start is to take a look at the archetypes.</p>

<h3>
<a name="archetypes" class="anchor" href="#archetypes"><span class="octicon octicon-link"></span></a>Archetypes</h3>

<p>There are two archetypes:</p>

<ul>
<li>
<code>angulargwt-module-archetype</code> for a <strong>module</strong> project, where the GWT code is used by a AngularJS app in javascript </li>
<li>
<code>angulargwt-app-archetype</code> for an <strong>app</strong> project, where the top-level-module is written in GWT</li>
</ul><p>As usual <code>mvn archetype:generate</code> or an IDE such as m2e or NetBeans can be used for the archetypes.</p>

<h3>
<a name="other-ways-to-set-up-angulargwt-projects" class="anchor" href="#other-ways-to-set-up-angulargwt-projects"><span class="octicon octicon-link"></span></a>Other ways to set up AngularGWT projects</h3>

<h4>
<a name="maven" class="anchor" href="#maven"><span class="octicon octicon-link"></span></a>Maven</h4>

<p>You can build AngularGWT libraries or apps is using a maven plugin, such as the <a href="http://mojo.codehaus.org/gwt-maven-plugin/">codehaus gwt-maven-plugin</a> or the <a href="https://github.com/tbroyer/gwt-maven-plugin">gwt-maven-plugin from Thomas Broyer</a></p>

<p>Integrate the following dependency into your pom.xml (adjust version number accordingly). It is on sonatype oss and releases are mirrored into maven central.</p>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;dependency&gt;</span>
   <span class="nt">&lt;groupId&gt;</span>com.github.h0ru5.gwt<span class="nt">&lt;/groupId&gt;</span>
   <span class="nt">&lt;artifactId&gt;</span>angulargwt<span class="nt">&lt;/artifactId&gt;</span>
   <span class="nt">&lt;version&gt;</span>1.1.3<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<p>Current SNAPSHOT state: <a href="https://buildhive.cloudbees.com/job/h0ru5/job/angulargwt/"><img src="https://buildhive.cloudbees.com/job/h0ru5/job/angulargwt/badge/icon" alt="Build Status"></a></p>

<h4>
<a name="manually-add-the-lib-to-your-project" class="anchor" href="#manually-add-the-lib-to-your-project"><span class="octicon octicon-link"></span></a>manually add the lib to your project</h4>

<p>tbd</p>

<h4>
<a name="ivygradle" class="anchor" href="#ivygradle"><span class="octicon octicon-link"></span></a>Ivy/Gradle/...</h4>

<p>tbd</p>

<h3>
<a name="inheriting-the-gwt-module" class="anchor" href="#inheriting-the-gwt-module"><span class="octicon octicon-link"></span></a>Inheriting the GWT module</h3>

<p>This inherits declaration is needed in your &lt;yourmodule&gt;.gwt.xml 
(note the com.google namespace)</p>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;inherits</span> <span class="na">name=</span><span class="s">"com.google.gwt.angular.angulargwt"</span> <span class="nt">/&gt;</span>
</pre></div>

<h3>
<a name="creating-an-angularjs-module" class="anchor" href="#creating-an-angularjs-module"><span class="octicon octicon-link"></span></a>Creating an AngularJS module</h3>

<p>Every project you write will provide at least one <strong>AngularJS Module</strong>. Just extend <code>AngularModule</code> and provide the module name and the dependencies with the <code>@NgName</code> and the <code>@NgDepends</code> annotations. Also put all provided components  (controllers, directives, services etc.) into the <code>@NgDepends</code>.</p>

<p>For example:</p>

<div class="highlight highlight-java"><pre><span class="nd">@NgName</span><span class="o">(</span><span class="s">"mymodule"</span><span class="o">)</span>
<span class="nd">@NgDepends</span><span class="o">({</span><span class="n">MyService</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">MyFilter</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">MyController</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">MyDirective</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyModule</span> <span class="kd">implements</span> <span class="n">AngularModule</span> <span class="o">{</span>
<span class="o">}</span>
</pre></div>

<h3>
<a name="choosing-a-module-or-an-application-as-project-type" class="anchor" href="#choosing-a-module-or-an-application-as-project-type"><span class="octicon octicon-link"></span></a>Choosing a module or an application as project type</h3>

<p>There are three ways a project is used:</p>

<ol>
<li>As Java library in another AngularGWT project</li>
<li>As javascript containing AngularGWT modules used by an AngularJS app</li>
<li>As javascript containing AngularGWT modules incl. the top-module</li>
</ol><p>For compillation to javascript, a GWT  entry point is needed. </p>

<h4>
<a name="app-project" class="anchor" href="#app-project"><span class="octicon octicon-link"></span></a>App project</h4>

<p>If you write not only a library module but an <strong>application</strong> (use case 3), you need to provide a entry-point class by extending <code>AngularApp</code>. You need to override the abstract method <code>main()</code>, which should return all referenced AngularGWT modules as an array.</p>

<div class="highlight highlight-java"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyApp</span> <span class="kd">extends</span> <span class="n">AngularApp</span> <span class="o">{</span>
   <span class="nd">@Override</span>
   <span class="kd">protected</span> <span class="n">AngularModule</span><span class="o">[]</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span>
     <span class="k">return</span> <span class="k">new</span> <span class="n">AngularModule</span><span class="o">[]</span> <span class="o">{(</span><span class="n">AngularModule</span><span class="o">)</span> <span class="n">GWT</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">MyModule</span><span class="o">.</span><span class="na">class</span><span class="o">)};</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>The template(s) are then provided in the same way as usual for AngularJS and need to include the GWT-generated script. You do not need to include angularjs in the head, it will be lazy-loaded from the CDN if it is not detected.</p>

<h4>
<a name="a-library-of-angulargwt-modules" class="anchor" href="#a-library-of-angulargwt-modules"><span class="octicon octicon-link"></span></a>A library of AngularGWT modules</h4>

<p>For all other projects (use cases 1 or 2), you write a <strong>module</strong> and extend an entry-point in the same way from <code>AngularEntryPoint</code></p>

<div class="highlight highlight-java"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyLib</span> <span class="kd">extends</span> <span class="n">AngularEntryPoint</span> <span class="o">{</span>
   <span class="nd">@Override</span>
   <span class="kd">protected</span> <span class="n">AngularModule</span><span class="o">[]</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span>
     <span class="k">return</span> <span class="k">new</span> <span class="n">AngularModule</span><span class="o">[]</span> <span class="o">{(</span><span class="n">AngularModule</span><span class="o">)</span> <span class="n">GWT</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">MyModule</span><span class="o">.</span><span class="na">class</span><span class="o">)};</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>If you use this lib in Java (use case 1), you just add the classes vand sources to the classpath (or let Maven do it).</p>

<p>If you use the compiled library as javascript in a regular AngularJS app (use case 2) then you have to delay the bootstrapping until the async loading of GWT has finished, this is done via a callback called <code>angularGwtModuleLoaded</code>.</p>

<p>The script <code>angulargwt.js</code> provides a very basic handler for this purpose.</p>

<p>So your AngularJS-app <strong>must not</strong> use <code>&lt;body ng-app="MyApp"&gt;</code>, but instead include this:</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"angulargwt.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span> 
        <span class="c1">// This must be called instead of ng-app!</span>
        <span class="nx">angulargwt</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p>Refer to <a href="http://docs.angularjs.org/guide/bootstrap">bootstrap process documentation</a> of AngularJS for background.</p>

<h3>
<a name="implementing-the-different-types-of-angularjs-components" class="anchor" href="#implementing-the-different-types-of-angularjs-components"><span class="octicon octicon-link"></span></a>Implementing the different types of AngularJS components</h3>

<p>Refer to <a href="http://docs.angularjs.org/guide/concepts">AngularJS concepts</a> for a basic intro of the different types of components</p>

<h4>
<a name="model" class="anchor" href="#model"><span class="octicon octicon-link"></span></a>Model</h4>

<p>A model is defined by its interface, which must extend from <code>Model&lt;&gt;</code> and use the own type as type parameter for the superinterface.</p>

<p>The Model is generated during compilation and in code it is invoked via <a href="http://www.gwtproject.org/doc/latest/DevGuideCodingBasicsDeferred.html">deferred binding</a>, which means you instatiate a Model via  <code>GWT.create()</code>.</p>

<div class="highlight highlight-java"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Person</span> <span class="kd">extends</span> <span class="n">Model</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="o">{</span>
   <span class="n">String</span> <span class="nf">getName</span><span class="o">();</span>
   <span class="n">Person</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">);</span>

   <span class="c1">//or</span>

   <span class="kt">int</span> <span class="nf">age</span><span class="o">();</span>
   <span class="n">Person</span> <span class="nf">age</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">);</span> 
<span class="o">}</span>
</pre></div>

<h4>
<a name="scope" class="anchor" href="#scope"><span class="octicon octicon-link"></span></a>Scope</h4>

<p>Similar to the Model, a Scope is defined by contract (by its interface) and generated in the compilation process.
Note that getters and setters can be implicit or explicit and use "fluent" or "void-setter" style.</p>

<div class="highlight highlight-java"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyScope</span> <span class="kd">extends</span> <span class="n">Scope</span><span class="o">&lt;</span><span class="n">MyScope</span><span class="o">&gt;</span> <span class="o">{</span>
   <span class="kt">void</span> <span class="nf">setPersons</span><span class="o">(</span><span class="n">ArrayOf</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">persons</span><span class="o">);</span>
   <span class="n">ArrayOf</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="nf">getPersons</span><span class="o">();</span>

   <span class="c1">//or</span>

   <span class="kt">int</span> <span class="nf">maxPersons</span><span class="o">();</span>
   <span class="n">MyScope</span> <span class="nf">maxPersons</span><span class="o">(</span><span class="kt">int</span> <span class="n">max</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<h4>
<a name="controller" class="anchor" href="#controller"><span class="octicon octicon-link"></span></a>Controller</h4>

<p>Controllers extend the class <code>Ã€ngularController&lt;&gt;</code> and refer to their scope as type argument. The name to be used in the template is specified via <code>@NgInject(name="ControllerName")</code>.</p>

<p>Each controller must implement the abstract function <code>initialize(Scope scope)</code>, in which it initializes the scope.</p>

<p>To specify a component to be injected, it must be declared as a public field and annotated with <code>@NgInjected</code></p>

<p>Watches are defined by annotating a Method with the <code>@Watch</code> annotation. The first parameter is the expression to be watched, the second parameter is a boolean that enforces deep object equality. The Method will be called when the watch expression changes with new and old value as parameters.
Refer to <a href="http://docs.angularjs.org/api/ng.%24rootScope.Scope#methods_%24watch">Angular's documentation on $watch</a> for background information.</p>

<div class="highlight highlight-java"><pre><span class="nd">@NgInject</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"MyCtrl"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyController</span> <span class="kd">extends</span> <span class="n">AngularController</span><span class="o">&lt;</span><span class="n">MyScope</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@NgInjected</span>
    <span class="kd">public</span> <span class="n">MyService</span> <span class="n">service</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">MyScope</span> <span class="n">scope</span><span class="o">)</span> <span class="o">{...}</span>

    <span class="nd">@NgWatch</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"persons"</span><span class="o">,</span> <span class="n">objEq</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">$watchPersons</span><span class="o">()</span> <span class="o">{...}</span>

    <span class="nd">@NgWatch</span><span class="o">(</span><span class="s">"location.path()"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">$watchPath</span><span class="o">(</span><span class="n">String</span> <span class="n">path</span><span class="o">)</span> <span class="o">{...}</span>

    <span class="c1">//arbitrary functions to be called from the template</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">clearPersons</span><span class="o">()</span> <span class="o">{...}</span>
<span class="o">}</span>
</pre></div>

<h4>
<a name="filter" class="anchor" href="#filter"><span class="octicon octicon-link"></span></a>Filter</h4>

<p>A Filter is implementing the Filter interface with a type parameter for the Model it is filtering. It is injectable by annotating the class with <code>@NgInject(name="filterName")</code>.</p>

<div class="highlight highlight-java"><pre><span class="nd">@NgInject</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"todoFilter"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoFilter</span> <span class="kd">implements</span> <span class="n">Filter</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="o">{</span>

        <span class="kd">public</span> <span class="n">ArrayOf</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="nf">filter</span><span class="o">(</span><span class="n">ArrayOf</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="n">todos</span><span class="o">,</span> <span class="n">Todo</span> <span class="n">todoFilterArg</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">ArrayOf</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">JsArrayOf</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>

            <span class="c1">//Filtering, e.g. by compairing with the Argument</span>

            <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<h4>
<a name="service" class="anchor" href="#service"><span class="octicon octicon-link"></span></a>Service</h4>

<p>A service can provide Util methods and is just implemented as POJO and annotated with the name used for injection into the controllers.</p>

<div class="highlight highlight-java"><pre><span class="nd">@NgInject</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"serverProxy"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServerProxy</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">ArrayOf</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="nf">get</span><span class="o">()</span> <span class="o">{...}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">put</span><span class="o">(</span><span class="n">ArrayOf</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="n">todos</span><span class="o">)</span> <span class="o">{...}</span>
<span class="o">}</span>
</pre></div>

<h4>
<a name="directive" class="anchor" href="#directive"><span class="octicon octicon-link"></span></a>Directive</h4>

<p>Directives are defined as classes that implement the interface <code>Directive</code>. 
The class must also be annotated as <code>@NgDirective("name")</code>.</p>

<p>Other components can be injected similar to the controller.</p>

<div class="highlight highlight-java"><pre><span class="nd">@NgDirective</span><span class="o">(</span><span class="s">"displayPerson"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyDirective</span> <span class="kd">implements</span> <span class="n">Directive</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">link</span><span class="o">(</span><span class="kd">final</span> <span class="n">MyScope</span> <span class="n">scope</span><span class="o">,</span> <span class="kd">final</span> <span class="n">ArrayOf</span><span class="o">&lt;</span><span class="n">NgElement</span><span class="o">&gt;</span> <span class="n">element</span><span class="o">,</span> <span class="kd">final</span> <span class="n">JsonObject</span> <span class="n">attrs</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//...</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<h2>
<a name="supporting-the-project--to-be-done" class="anchor" href="#supporting-the-project--to-be-done"><span class="octicon octicon-link"></span></a>Supporting the project / to be done</h2>

<ul>
<li>More JavaDoc</li>
<li>Unit tests.</li>
<li>Transitive dependencies, modules that depend on modules.</li>
<li>JSO wrappers for the rest of the AngularJs API. (so far only what was needed for TodoMVC is implemented)</li>
</ul><h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>Since GWT is using Apache Licence and AngularJS is using MIT Licence, the usage of this code code should conform this both licences.
I am happy for any legal advice on the proper licencing.</p>

<h2>
<a name="kudos" class="anchor" href="#kudos"><span class="octicon octicon-link"></span></a>Kudos</h2>

<p>I forked this code from <a href="https://github.com/nordligulv/angulargwt%20nordligulv">nordligulv</a>, which is a fork from <a href="https://github.com/cromwellian/angulargwt%20cromweilian">cromwellian</a>, I merely buffed things up a bit and added this doc.</p>

<blockquote>
<p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p>
</blockquote>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
